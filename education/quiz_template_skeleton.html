<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>New Quiz | ToppyMicroServices</title>
  <meta name="description" content="Skeleton quiz page for new drills (MC, multi-select, text)." />
  <link rel="canonical" href="https://toppymicros.com/education/quiz_template_skeleton.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ToppyMicroServices ‚Äî Quiz Skeleton" />
  <meta property="og:description" content="Starter template for creating new quizzes." />
  <meta property="og:url" content="https://toppymicros.com/education/quiz_template_skeleton.html" />
  <meta property="og:image" content="https://toppymicros.com/og-brand-clean.png" />
  <meta property="og:site_name" content="ToppyMicroServices" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="ToppyMicroServices ‚Äî Quiz Skeleton" />
  <meta name="twitter:description" content="Starter template for creating new quizzes." />
  <meta name="twitter:image" content="https://toppymicros.com/og-brand-clean.png" />
  <link rel="stylesheet" href="quiz.css" />
  <script defer data-domain="toppymicros.com" data-auto="false" src="https://plausible.io/js/script.tag"></script>
  <script defer src="../assets/global.js"></script>
</head>
<body data-theme="light">
  <script>
    window.DRILL_SETTINGS = {
      SKILL_NAME: "Your Skill Name",
      SKILL_SUBTITLE: "Your Drill Subtitle",
      GOAL_DESCRIPTION: "Describe the learning goal",
      LEARNING_MODE_DEFAULT: true,
      BRAND_NAME: "ToppyMicroServices",
      BRAND_LOGO: "og-brand-clean.min.png",
      BRAND_URL: "../index.html"
    };
  </script>
  <div class="container">
    <header>
      <div>
        <div class="brand">
          <a id="brand-link" href="../index.html" aria-label="Home">
            <img id="brand-logo" alt="ToppyMicroServices logo" src="og-brand-clean.min.png" width="40" height="40" style="display:inline-block">
            <span id="brand-name" class="name">ToppyMicroServices</span>
          </a>
        </div>
        <h1 id="title">Quiz Drill Title</h1>
        <h2 id="subtitle">Brief description or usage tip</h2>
      </div>
      <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
        <button type="button" class="theme-toggle" id="themeToggle" aria-pressed="false">üåû Light</button>
        <button type="button" class="badge clickable" id="mode-badge" aria-live="polite" aria-pressed="true" title="Toggle learning/test mode">Learning Mode</button>
        <span id="score-badge" aria-live="polite" title="Live Score">0 / 0</span>
      </div>
    </header>

    <details class="cheatsheet card">
      <summary>Cheat Sheet (reference)</summary>
      <div class="sheet">
        <ul>
          <li>Put key definitions or hints here.</li>
          <li>Keep it concise and scannable.</li>
        </ul>
      </div>
    </details>

    <section id="questions">
      <article class="q card" data-id="Q1" data-type="mc" data-answer="b">
        <header><h4>Q1: Single-choice example</h4><span class="type">Multiple Choice</span></header>
        <div class="body">
          <fieldset class="choices">
            <label class="choice"><input type="radio" name="Q1" value="a"> A. Option A</label>
            <label class="choice"><input type="radio" name="Q1" value="b"> B. Option B (correct)</label>
            <label class="choice"><input type="radio" name="Q1" value="c"> C. Option C</label>
          </fieldset>
          <div class="explain"><strong>Explanation:</strong> Explain why B is correct.</div>
        </div>
      </article>

      <article class="q card" data-id="Q2" data-type="ms" data-answer="a,c">
        <header><h4>Q2: Multi-select example</h4><span class="type">Multi-Select</span></header>
        <div class="body">
          <fieldset class="choices">
            <label class="choice"><input type="checkbox" name="Q2" value="a"> A. Choice A (correct)</label>
            <label class="choice"><input type="checkbox" name="Q2" value="b"> B. Choice B</label>
            <label class="choice"><input type="checkbox" name="Q2" value="c"> C. Choice C (correct)</label>
          </fieldset>
          <div class="explain"><strong>Explanation:</strong> A and C satisfy the condition.</div>
        </div>
      </article>

      <article class="q card" data-id="Q3" data-type="text" data-answer="entropy">
        <header><h4>Q3: Short text example</h4><span class="type">Short Text</span></header>
        <div class="body">
          <input type="text" name="Q3" aria-label="Q3 input" placeholder="Type answer">
          <div class="explain"><strong>Explanation:</strong> Expected answer is "entropy".</div>
        </div>
      </article>
    </section>

    <div class="card panel" id="bottom-actions">
      <div class="row" style="justify-content:flex-end">
        <button class="btn success" id="bottomShowAnswers" data-results-target="results-bottom">Show Answers & Score</button>
      </div>
      <div class="results card" id="results-bottom" aria-live="polite" style="display:none"></div>
    </div>

    <footer class="muted" style="margin-top:24px">
      <p>This drill helps elevate <strong id="footer-skill">Your Skill Name</strong> to ‚Äú<em id="footer-goal">Describe the learning goal</em>‚Äù.</p>
      <p style="margin:.4rem 0 0"><span id="footer-brand"></span> <span id="copyright"></span></p>
    </footer>
  </div>

  <script>
  (function(){
    const $=(s,r=document)=>r.querySelector(s); const $$=(s,r=document)=>Array.from(r.querySelectorAll(s));
    const ESCAPE_MAP={"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"};
    const escapeHtml=str=>(str??'').replace(/[&<>"']/g,ch=>ESCAPE_MAP[ch]||ch);
    const locale=(document.documentElement.lang||'').toLowerCase();
    const DETAIL_TEXT=locale.startsWith('ja')?
      { detailHeading:'Ë©≥Á¥∞„É™„Çπ„Éà', detailDescription:'ÂêÑË®≠Âïè„ÅÆÂõûÁ≠î„ÉªÊ≠£Ëß£„Éª„Çπ„Ç≥„Ç¢„ÉªËß£Ë™¨„Çí„Åæ„Å®„ÇÅ„Å¶„ÅÑ„Åæ„Åô„ÄÇ', columns:{question:'Ë®≠Âïè',response:'ÂõûÁ≠î',correct:'Ê≠£Ëß£',score:'„Çπ„Ç≥„Ç¢',explanation:'Ëß£Ë™¨'}, status:{correct:'Ê≠£Ëß£',incorrect:'‰∏çÊ≠£Ëß£',unanswered:'Êú™ÂõûÁ≠î'}, noAnswer:'Êú™ÂõûÁ≠î', notAvailable:'N/A', none:'„Å™„Åó' }:
      { detailHeading:'Detailed Breakdown', detailDescription:'Responses, correct answers, scores, and explanations for every question.', columns:{question:'Question',response:'Your Answer',correct:'Correct Answer',score:'Result',explanation:'Explanation'}, status:{correct:'Correct',incorrect:'Incorrect',unanswered:'Unanswered'}, noAnswer:'Not answered', notAvailable:'N/A', none:'None' };
    const THEME_KEY='quizTheme'; const prefersDark=window.matchMedia('(prefers-color-scheme: dark)');
    function updateThemeToggle(mode){const b=$('#themeToggle'); if(!b) return; const L=mode==='light'; b.textContent=L?'üåô Dark':'üåû Light'; b.setAttribute('aria-pressed',L?'true':'false');}
    function setTheme(m,persist=true){const n=m==='light'?'light':'dark'; document.body.setAttribute('data-theme',n); if(persist){try{localStorage.setItem(THEME_KEY,n);}catch(e){}} updateThemeToggle(n);}    
    function applyInitialTheme(){let s=null; try{s=localStorage.getItem(THEME_KEY);}catch(e){} const init=s||(prefersDark.matches?'dark':'light'); setTheme(init,false);}    
    function toggleTheme(){const c=document.body.getAttribute('data-theme')==='light'?'light':'dark'; setTheme(c==='light'?'dark':'light',true);}    
    function applySettings(){const S=window.DRILL_SETTINGS||{}; const name=S.SKILL_NAME; const sub=S.SKILL_SUBTITLE; const goal=S.GOAL_DESCRIPTION; $('#title').textContent=(name?name+' ':'')+(sub?('‚Äî '+sub):''); $('#subtitle').textContent=goal||''; $('#footer-skill').textContent=name||'Skill'; $('#footer-goal').textContent=goal||''; const img=$('#brand-logo'); if(img&&S.BRAND_LOGO){img.src=S.BRAND_LOGO; img.style.display='inline-block'; img.alt=S.BRAND_NAME||'';} $('#brand-name').textContent=S.BRAND_NAME||''; $('#brand-link').href=S.BRAND_URL||'/'; $('#footer-brand').innerHTML='<strong>'+(S.BRAND_NAME||'')+'</strong>';}    
    function showExplain(q,show=true){const exp=q.querySelector('.explain'); if(!exp) return; exp.classList.toggle('show',!!show);}    

    function isAnswered(q){const t=q.dataset.type; if(t==='mc') return !!q.querySelector('input[type=radio]:checked'); if(t==='ms') return q.querySelectorAll('input[type=checkbox]:checked').length>0; if(t==='text'){const v=q.querySelector('input[type=text]')?.value.trim(); return !!v;} return false;}

    function cleanLabelText(text){ return (text||'').replace(/\s+/g,' ').trim(); }
    function describeChoiceList(q,values){ if(!values||!values.length) return ''; const map=v=>{const input=q.querySelector('input[value="'+CSS.escape(v)+'"]'); const label=input?.closest('label'); return label?cleanLabelText(label.textContent):v; }; return values.map(map).join(', '); }
    function describeChoiceLabel(q,value){ return describeChoiceList(q,[value]); }

    function evaluateQuestion(q){const id=q.dataset.id; const type=q.dataset.type; const ans=(q.dataset.answer||'').trim(); let ok=null,user=null; if(type==='mc'){const p=q.querySelector('input[type=radio]:checked'); if(!p){ok=null;} else {user=p.value; ok=(user===ans);} } else if(type==='ms'){const picked=q.querySelectorAll('input[type=checkbox]:checked'); user=Array.from(picked).map(i=>i.value).sort(); if(!user.length){ok=null;} else {const gold=ans.split(',').map(s=>s.trim()).sort(); ok=JSON.stringify(user)===JSON.stringify(gold);} } else if(type==='text'){const t=q.querySelector('input[type=text]'); user=(t?.value||'').trim(); const mode=(q.dataset.eval||'exact').toLowerCase(); if(!user){ok=null;} else if(mode==='regex'){try{ok=new RegExp(ans,'i').test(user);}catch(e){ok=false;}} else {ok=(user===ans);} } return {id,type,ok,user};}

    function formatUserAnswerDisplay(q,evaluation){ const type=q.dataset.type; if(type==='mc'){return evaluation.user?describeChoiceLabel(q,evaluation.user):'';} if(type==='ms'){const vals=Array.isArray(evaluation.user)?evaluation.user:[]; return vals.length?describeChoiceList(q,vals):'';} if(type==='text'){return evaluation.user||'';} return '';
    }
    function formatCorrectAnswerDisplay(q){ const type=q.dataset.type; const ans=(q.dataset.answer||'').trim(); if(!ans) return ''; if(type==='mc') return describeChoiceLabel(q,ans); if(type==='ms'){const vals=ans.split(',').map(s=>s.trim()).filter(Boolean); return vals.length?describeChoiceList(q,vals):'';} if(type==='text'){const mode=(q.dataset.eval||'exact').toLowerCase(); return mode==='regex' ? 'Regex: '+ans : ans;} return ans; }

    function scoreLabel(ok){ if(ok===true) return DETAIL_TEXT.status.correct; if(ok===false) return DETAIL_TEXT.status.incorrect; return DETAIL_TEXT.status.unanswered; }

    function computeLiveScore(){const qs=$$('#questions .q'); let total=0,correct=0,answered=0; qs.forEach(q=>{total++; const r=evaluateQuestion(q); if(r.ok===true) correct++; if(isAnswered(q)) answered++;}); return {total,correct,answered};}
    function updateLiveScore(){const s=computeLiveScore(); const el=$('#score-badge'); if(el){ el.textContent=s.correct+' / '+s.total; el.title='Correct '+s.correct+' of '+s.total; }}

    function resolveResultsBox(targetId){ if(targetId){ const el=document.getElementById(targetId); if(el) return el; } return document.getElementById('results-bottom') || document.querySelector('.results'); }

    function showAnswersAndScore(targetId){
      let total=0,correct=0,answered=0; const rows=[];
      $$('#questions .q').forEach(q=>{
        total++; const result=evaluateQuestion(q); if(isAnswered(q)) answered++; if(result.ok===true) correct++;
        showExplain(q,true);
        const qTitle=q.querySelector('h4')?.textContent.trim()||result.id;
        const expHtml=q.querySelector('.explain')?.innerHTML.trim()||'';
        const status=scoreLabel(result.ok);
        const correctDisp=formatCorrectAnswerDisplay(q);
        const userDisp=formatUserAnswerDisplay(q,result)||DETAIL_TEXT.noAnswer;
        rows.push('<tr>'+
          '<td><div><strong>'+escapeHtml(result.id)+'</strong></div><div>'+escapeHtml(qTitle)+'</div></td>'+
          '<td>'+escapeHtml(userDisp)+'</td>'+
          '<td>'+escapeHtml(correctDisp||DETAIL_TEXT.notAvailable)+'</td>'+
          '<td>'+escapeHtml(status)+'</td>'+
          '<td>'+(expHtml||'')+'</td>'+
        '</tr>');
      });
      const box=resolveResultsBox(targetId);
      if(box){
        const scoreHeading=locale.startsWith('ja')?'„Çπ„Ç≥„Ç¢':'Score';
        const summaryLabel=locale.startsWith('ja')
          ? 'Ê≠£Ëß£: <strong>'+correct+'</strong> / '+total+' (ÂõûÁ≠î: '+answered+')'
          : 'Correct: <strong>'+correct+'</strong> / '+total+' (answered: '+answered+')';
        const tableHTML='<div class="table-wrapper"><table><thead><tr>'+
          '<th>'+DETAIL_TEXT.columns.question+'</th>'+
          '<th>'+DETAIL_TEXT.columns.response+'</th>'+
          '<th>'+DETAIL_TEXT.columns.correct+'</th>'+
          '<th>'+DETAIL_TEXT.columns.score+'</th>'+
          '<th>'+DETAIL_TEXT.columns.explanation+'</th>'+
        '</tr></thead><tbody>'+rows.join('')+'</tbody></table></div>';
        box.innerHTML='<h4 style="margin:0 0 8px">'+scoreHeading+'</h4><p>'+summaryLabel+'</p>'+tableHTML;
        box.style.display='block';
      }
    }

    // Handlers
    $('#themeToggle')?.addEventListener('click',()=>{toggleTheme(); updateLiveScore();});
    $('#mode-badge').addEventListener('click',()=>{let lm=$('#learningMode'); if(!lm){ lm=document.createElement('input'); lm.type='checkbox'; lm.id='learningMode'; lm.checked=true; lm.style.display='none'; document.body.appendChild(lm);} lm.checked=!lm.checked; const mb=$('#mode-badge'); mb.textContent=lm.checked?'Learning Mode':'Test Mode'; mb.setAttribute('aria-pressed',lm.checked?'true':'false'); updateLiveScore();});
    const bottomBtn=$('#bottomShowAnswers');
    if(bottomBtn){ bottomBtn.addEventListener('click',()=>{ showAnswersAndScore(bottomBtn.dataset.resultsTarget); }); }

    applyInitialTheme();
    try{ if(!localStorage.getItem('quizTheme')){ setTheme(prefersDark.matches?'dark':'light',false);} }catch(_){ }
    applySettings();
    if(!$('#learningMode')){ const lm=document.createElement('input'); lm.type='checkbox'; lm.id='learningMode'; lm.checked=true; lm.style.display='none'; document.body.appendChild(lm);} 
    const mb=$('#mode-badge'); if(mb){ mb.textContent='Learning Mode'; mb.setAttribute('aria-pressed','true'); }
    updateLiveScore();
    const y=new Date().getFullYear(); const b=window.DRILL_SETTINGS?.BRAND_NAME||'ToppyMicroServices'; const c=$('#copyright'); if(c){ c.textContent='¬© '+y+' '+b+'. All rights reserved.'; }
  })();
  </script>
</body>
</html>
